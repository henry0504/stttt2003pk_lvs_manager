{% extends "index.html" %}
{% block body %}

  <div>
    <div id='lvsmanager_deploy_add_body'>
        <h4>VIP</h4>
        <hr>
        <form>
            <div>
              <label for="vipinstance">VIP Instance</label>
              <div>
                <td><input id="vip_instance" type="text" name='vip_instance' check-type="required"><span>VIP Instance must be uniq</span></td>
              </div>
            </div>
            <div>
              <label for="descript">service name</label>
              <div>
                <td><input id="descript" type="text" name='descript' placeholder="service name"></td>
              </div>
            </div>
            <div>
              <label for="owners">person in charge</label>
              <div>
                <td><input id="owners" type="text" name='owners' placeholder="负责人"></td>
              </div>
            </div>
            <div>
              <label for="mailto">mail list warning</label>
              <div>
                <td><input style="width: 310px;" id="mailto" type="text" name='mailto' placeholder="以逗号分割"><span>mail list split by comma</span></td>
              </div>
            </div>
            <div>
              <label for="vip_group">VIP group</label>
              <div>
                <td><input style="width: 310px;" id="vip_group" type="text" name='vip' placeholder="VIP地址"><span>1.1.1.1:80,2.2.2.2:80</span></td>
              </div>
            </div>
            <div>
              <label for="protocol">protocol</label>
              <div>
                <select id="protocol" name='protocol'>
                    <option value='TCP'>TCP</option>
                    <option value='UDP'>UDP</option>
                </select>
              </div>
            </div>
            <div>
              <label for="delay_loop">monitor interval</label>
              <div>
                <td><input style="width: 40px;" id="delay_loop" type="text" name='delay_loop' placeholder="检测间隔" value="6"></td>
              </div>
            </div>
            <div>
              <label for="lb_algo">balance method</label>
              <div>
                <select id="lb_algo" name='lb_algo'>
                    <option value='wrr'>wrr</option>
                    <option value='rr'>rr</option>
                    <option value='lc'>lc</option>
                    <option value='wlc'>wlc</option>
                    <option value='lblc'>lblc</option>
                    <option value='sh'>sh</option>
                    <option value='dh'>dh</option>
                </select>
              </div>
            </div>
            <div>
              <label for="lb_kind">lvs type</label>
              <div>
                <select id="lb_kind" name='lb_kind'>
                    <option value='FNAT'>FNAT</option>
                    <option value='DR'>DR</option>
                    <option value='NAT'>NAT</option>
                    <option value='TUN'>TUN</option>
                </select>
              </div>
            </div>
            <div>
              <label for="persistence_timeout">persistence timeout</label>
              <div>
                <td><input style="width: 40px;" id="persistence_timeout" type="text" name='persistence_timeout' placeholder="persistence timeout" value='0' ></td>
              </div>
            </div>
            <div>
              <label for="sync_proxy">syn flood defence</label>
              <div>
                <td><input id="sync_proxy" name='sync_proxy' type='checkbox' value='True' checked="true"></td>
              </div>
            </div>
            <div>
              <label for="alpha">alpha</label>
              <div>
                <td><input id="alpha" name='alpha' type='checkbox' value='True' checked="true"><span>是否开启alpha模式,启动时默认rs是down状态，健康检查通过后才添加到lvs pool</span></td>
              </div>
            </div>
            <div>
              <label for="omega">omega</label>
              <div>
                <td><input id="omega" name='omega' type='checkbox' value='True' checked="true"><span>是否开启omega模式，清楚rs时会执行相应的脚本(quorum_up)</span></td>
              </div>
            </div>
            <div>
              <label for="quorum">quorum</label>
              <div>
                <td><input style="width: 40px;" id="quorum" type="text" name='quorum' value='1' ><span>service limit</span></td>
              </div>
            </div>
            <div>
              <label for="hysteresis">hysteresis</label>
              <div>
                <td><input style="width: 40px;" id="hysteresis" type="text" name='hysteresis' value='0'><span>delay factor</span></td>
              </div>
            </div>
        </form>
        </br>
        <h4>RealServer group</h4>
        <hr>
        <button id="rs_add"><span></span>add real server</button>
        <table>
              <thead>
                <tr>
                  <th style="width: 10%">server manage IP</th>
                  <th style="width: 10%">service IP</th>
                  <th style="width: 10%">weight</th>
                  <th style="width: 40%">port list</th>
                  <th style="width: 10%">monitor</th>
                  <th>ops</th>
                </tr>
              </thead>
              <tbody id='rs_talbe_body'>
              </tbody>
        </table>
        <hr>
        <button style="position: relative;left: 800px;" id="lvs_deploy_add_submit" ><span></span>submit</button>
        <a href="/lvsmanager_deploy/?id={{ cluster }}" style="position: relative;left: 800px;"><span></span>back</a>
    </div>
  </div>



<div id="dialog-form" title="add real server">
  <form>
  <fieldset>
    <div>
      <label for="manager_ip">manage IP</label>
      <div>
        <td><input id="manager_ip" type="text" name='manager_ip'><span>IP for login</span></td>
      </div>
    </div>
    <div>
      <label for="server_ip">service ip</label>
      <div>
        <td><input id="server_ip" type="text" name='server_ip'><span>IP for service</span></td>
      </div>
    </div>
    <div>
      <label for="weight">weight</label>
      <div>
        <td><input id="weight" type="text" name='weight'><span>real server weight</span></td>
      </div>
    </div>
    <div>
      <label for="rs_port">port list</label>
      <div>
        <td><input id="rs_port" type="text" name='rs_port'><span>port list split(',')</span></td>
      </div>
    </div>
    <div>
      <label for="monitor_type">monitor type</label>
      <div>
        <select id="monitor_type" name='monitor_type'>
            <option value='HTTP_GET'>HTTP_GET</option>
            <option value='TCP_CHECK'>TCP_CHECK</option>
            <option value='MISC_CHECK'>MISC_CHECK</option>
        </select>
      </div>
    </div>
    <div id="monitor_method">
        <div>
          <label for="path">path</label>
          <div>
            <td><input id="path" type="text" name='path'></td>
          </div>
        </div>
        <div>
          <label for="digest">digest</label>
          <div>
            <td><input id="digest" type="text" name='digest'></td>
          </div>
        </div>
        <div>
          <label for="connect_timeout">connection_timeout</label>
          <div>
            <td><input id="connect_timeout" type="text" name='connect_timeout'></td>
          </div>
        </div>
        <div>
          <label for="nb_get_retry">retry connection</label>
          <div>
            <td><input id="nb_get_retry" type="text" name='nb_get_retry'></td>
          </div>
        </div>
        <div>
          <label for="delay_before_retry">delay_before_retry</label>
          <div>
            <td><input id="delay_before_retry" type="text" name='delay_before_retry'></td>
          </div>
        </div>
    </div>
  </fieldset>
  </form>
</div>

</div>








{% endblock %}
